<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Crunch Fitness ‚Äî AI Outbound Call Agent (POC)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <style>
    :root{
      --bg: #0b0c10;
      --panel: #111317;
      --muted: #a7b0c0;
      --text: #e8ecf1;
      --brand: #34d399; /* mint */
      --brand-2: #8b5cf6; /* accent */
      --danger: #ef4444;
      --ok: #22c55e;
      --card: #141822;
      --border: #242a36;
      --chip: #1c2230;
      --chip-text: #c7d1e0;
      --shadow: 0 5px 30px rgba(0,0,0,.25);
      --radius: 16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 10% -20%, rgba(52,211,153,.10), transparent 60%),
        radial-gradient(1200px 600px at 110% 20%, rgba(139,92,246,.10), transparent 60%),
        var(--bg);
    }
    a{color:var(--brand)}
    .wrap{max-width:1100px;margin:0 auto;padding:32px 20px}
    .hero{
      display:grid; gap:22px; align-items:center; grid-template-columns: 1.2fr .8fr;
      padding:20px; border:1px solid var(--border); border-radius:var(--radius);
      background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.00));
      box-shadow: var(--shadow);
    }
    .hero h1{font-size: clamp(28px, 3vw, 42px); line-height:1.05; margin:0}
    .hero p{margin:0;color:var(--muted);font-size: clamp(14px, 1.6vw, 18px)}
    .cta-card{
      background:var(--card); border:1px solid var(--border); border-radius:var(--radius); padding:18px;
    }
    .badge{display:inline-block;padding:6px 10px;border-radius:999px;background:var(--chip);color:var(--chip-text);font-weight:600;font-size:12px;letter-spacing:.2px}
    .form{display:grid; gap:12px; margin-top:12px}
    label{font-weight:600; font-size:14px}
    input[type="text"], input[type="tel"]{
      width:100%; padding:12px 14px; border-radius:10px; border:1px solid var(--border);
      background:#0f131d; color:var(--text); outline:none;
    }
    input::placeholder{color:#647087}
    .row{display:grid; grid-template-columns:1fr 1fr; gap:12px}
    .consent{display:flex; gap:10px; align-items:flex-start; font-size:13px; color:#cbd5e1}
    .btn{
      appearance:none; border:none; border-radius:12px; padding:12px 16px; font-weight:700;
      background:linear-gradient(90deg, var(--brand), #4ade80);
      cursor:pointer; color:#0b0c10; box-shadow: var(--shadow);
    }
    .btn[disabled]{opacity:.6; cursor:not-allowed}
    .status{font-size:13px; margin-top:6px}
    .status.ok{color:var(--ok)}
    .status.err{color:var(--danger)}
    .bonus{
      margin-top:28px; padding:16px; border:1px dashed var(--border); border-radius:var(--radius);
      background:rgba(52,211,153,.06);
    }
    .chips{display:flex; flex-wrap:wrap; gap:8px; margin-top:10px}
    .chip{
      border:1px solid var(--border); background:var(--chip); color:var(--chip-text);
      padding:8px 12px; border-radius:999px; font-size:13px; cursor:pointer;
    }
    .hint{font-size:12px; color:#9fb0c7; margin-top:6px}
    .arch{
      margin-top:34px; display:grid; gap:16px;
      grid-template-columns: 1fr 1fr; align-items:start;
      border:1px solid var(--border); border-radius:var(--radius); padding:18px; background:var(--panel);
    }
    .arch h3{margin:0 0 8px 0}
    .kvs{display:grid; gap:8px}
    .kv{display:flex; gap:10px; align-items:flex-start}
    .kv strong{color:#eaf3ff}
    .diagram{width:100%; background:#0f131d; border-radius:12px; border:1px solid var(--border); padding:10px}
    .logo { font-weight: 900; font-size: 22px; letter-spacing: .5px; margin-bottom: 8px; }
    footer{
      margin:28px 0 10px; font-size:12px; color:#9fb0c7; display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap;
    }
    @media (max-width: 900px){
      .hero{grid-template-columns:1fr}
      .row{grid-template-columns:1fr}
      .arch{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <div class="wrap">

    <!-- HERO -->
    <section class="hero">
      <div>
        <span class="badge">POC ‚Ä¢ Realtime Voice AI</span>
        <h1>Crunch Fitness ‚Äî AI Outbound Call Agent</h1>
        <p>
          <br>
          This demo showcases a multilingual, realtime voice agent that nurtures leads and books
          in‚Äëclub trial passes ‚Äî aligned with the vision for the organization's transformation.
          <br>
          Try it now >>>
        </p>
      </div>
      <div class="cta-card">
        <form id="leadForm" class="form" autocomplete="on">
          <div class="logo">Crunch Fitness</div>
          <p class="muted">Get Your Free Trial Pass</p>
          <p class="muted">Enter your details and our agent will call you shortly.</p>
        </div>
          <div class="row">
            <div>
              <label for="name">Your name</label>
              <input id="name" name="name" type="text" placeholder="Jane Doe" required />
            </div>
            <div>
              <label for="phone">Mobile (E.164)</label>
              <input id="phone" name="phone" type="tel" placeholder="+15135551234" required />
            </div>
          </div>

          <!-- Optional language preference: purely informational; the agent will follow your speech -->
          <input type="hidden" id="preferredLanguage" name="preferredLanguage" value="" />

          <label class="consent">
            <input id="consent" type="checkbox" required />
            <span>I consent to receive a one‚Äëtime demo phone call from this AI agent for evaluation purposes.</span>
          </label>

          <button id="submitBtn" class="btn" type="submit">üìû Start demo call</button>
          Privacy: Information collected here is solely for this demo and will not be sold or used for any other purpose.
          <div id="status" class="status" role="status" aria-live="polite"></div>
        </form>

        <div class="bonus">
          <strong>Bonus: try another language</strong>
          <div class="chips" id="langChips">
            <span class="chip" data-lang="Spanish">Espa√±ol</span>
            <span class="chip" data-lang="French">Fran√ßais</span>
            <span class="chip" data-lang="Arabic">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</span>
            <span class="chip" data-lang="Mandarin Chinese">‰∏≠Êñá</span>
            <span class="chip" data-lang="Hindi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</span>
            <span class="chip" data-lang="Portuguese">Portugu√™s</span>
          </div>
          <div class="hint" id="langHint">Tip: answer the phone and speak in that language ‚Äî the agent will follow.</div>
        </div>
      </div>
    </section>

    <!-- ARCHITECTURE -->
    <section class="arch">
      <div>
        <h3>How it works</h3>
        <div class="kvs">
          <div class="kv"><span>‚úÖ</span><div><strong>Outbound flow:</strong> Form ‚Üí Fastify backend triggers a Twilio call ‚Üí TwiML connects a media stream.</div></div>
          <div class="kv"><span>üéôÔ∏è</span><div><strong>Realtime voice:</strong> Twilio streams Œº‚Äëlaw audio to OpenAI Realtime; the agent responds with Œº‚Äëlaw audio back to the caller.</div></div>
          <div class="kv"><span>üåç</span><div><strong>Multilingual:</strong> The model detects & responds in the language you speak ‚Äî no extra config needed.</div></div>
        </div>
      </div>
      <div class="diagram">
        <!-- Simple inline SVG diagram -->
        <svg viewBox="0 0 880 300" width="100%" height="auto" xmlns="http://www.w3.org/2000/svg" aria-label="Architecture diagram">
          <defs>
            <linearGradient id="g1" x1="0" x2="1">
              <stop offset="0" stop-color="#34d399"/>
              <stop offset="1" stop-color="#8b5cf6"/>
            </linearGradient>
          </defs>
          <rect x="0" y="0" width="880" height="300" rx="12" fill="#0b111b" stroke="#242a36"/>
          <!-- Nodes -->
          <g font-family="system-ui, sans-serif" font-size="13" fill="#e8ecf1" text-anchor="middle">
            <rect x="20" y="40" width="170" height="70" rx="10" fill="#1a2030" stroke="#2a3242"/>
            <text x="105" y="78">Browser Form</text>
            <text x="105" y="96" fill="#9fb0c7">/api/start-call</text>

            <rect x="210" y="40" width="190" height="70" rx="10" fill="#1a2030" stroke="#2a3242"/>
            <text x="305" y="70">Fastify (Render)</text>
            <text x="305" y="88" fill="#9fb0c7">TwiML + WS bridge</text>

            <rect x="420" y="40" width="170" height="70" rx="10" fill="#1a2030" stroke="#2a3242"/>
            <text x="505" y="70">Twilio Voice</text>
            <text x="505" y="88" fill="#9fb0c7">Media Streams</text>

            <rect x="610" y="40" width="250" height="70" rx="10" fill="#1a2030" stroke="#2a3242"/>
            <text x="735" y="70">OpenAI Realtime</text>
            <text x="735" y="88" fill="#9fb0c7">gpt‚Äë4o‚Äërealtime (Œº‚Äëlaw)</text>

            <rect x="420" y="170" width="170" height="70" rx="10" fill="#1a2030" stroke="#2a3242"/>
            <text x="505" y="200">Caller</text>
            <text x="505" y="218" fill="#9fb0c7">Mobile line</text>

            <rect x="210" y="170" width="190" height="70" rx="10" fill="#1a2030" stroke="#2a3242"/>
            <text x="305" y="200">Google Sheets</text>
            <text x="305" y="218" fill="#9fb0c7">Transcripts & leads</text>
          </g>

          <!-- Arrows -->
          <g stroke="url(#g1)" stroke-width="2" fill="none" marker-end="url(#arrow)">
            <defs>
              <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">
                <path d="M0,0 L0,6 L9,3 z" fill="url(#g1)"/>
              </marker>
            </defs>
            <path d="M190,75 L210,75"/>
            <path d="M400,75 L420,75"/>
            <path d="M590,75 L610,75"/>
            <path d="M505,110 L505,170"/>
            <path d="M305,110 L305,170"/>
          </g>
        </svg>
      </div>
    </section>

    <footer>
      <div>¬© Robert Maleki</div>
    </footer>
  </div>

  <script>
    const form = document.getElementById('leadForm');
    const statusEl = document.getElementById('status');
    const submitBtn = document.getElementById('submitBtn');
    const consent = document.getElementById('consent');
    const preferredLanguage = document.getElementById('preferredLanguage');
    const langChips = document.getElementById('langChips');
    const langHint = document.getElementById('langHint');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      statusEl.textContent = '';
      statusEl.className = 'status';

      const name = document.getElementById('name').value.trim();
      const phone = document.getElementById('phone').value.trim();

      if (!consent.checked) {
        statusEl.textContent = 'Please check the consent box to proceed.';
        statusEl.classList.add('err');
        return;
      }
      if (!name || !phone) {
        statusEl.textContent = 'Name and phone are required.';
        statusEl.classList.add('err');
        return;
      }

      submitBtn.disabled = true;
      submitBtn.textContent = 'Calling‚Ä¶';

      try {
        const res = await fetch('/api/start-call', {
          method: 'POST',
          headers: {'Content-Type':'application/json'},
          body: JSON.stringify({ name, phone, preferredLanguage: preferredLanguage.value || null })
        });

        if (!res.ok) {
          const data = await res.json().catch(() => ({}));
          throw new Error(data.error || `Request failed (${res.status})`);
        }

        statusEl.textContent = 'Call started! You should receive a call in a few seconds. If you are on a Twilio trial, press any key to continue when prompted.';
        statusEl.classList.add('ok');
      } catch (err) {
        statusEl.textContent = 'Something went wrong: ' + err.message;
        statusEl.classList.add('err');
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = 'üìû Start demo call';
      }
    });
  </script>
</body>
</html>
